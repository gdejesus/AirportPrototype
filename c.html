<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ProtoAirport</title>
    <link rel="stylesheet" href="style/bootstrap.min.css" />
    <link rel="stylesheet" href="style/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="style/jquery-ui.min.css" />

    <link rel="stylesheet" href="style/custom.css" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script type="text/javascript" src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


</head>

<body>

    <div id="navContainer"></div>

    <div class="container tc">
        <h1>Proto Companias</h1>
        <div class="row">
            <div class="col-md-4">
                <input id="companies" class="form-control autocomplete" placeholder="Compania..." />
                <button type="submit" class="btn btn-primary" title="Detalle"><span class="glyphicon glyphicon-search"></span></button>
            </div>

            <div class="col-md-8">
                <div class="wrapper">
                    <div id="companyInfo">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <th>Id</th>
                                    <td id="idCompany"></td>
                                </tr>
                                <tr>
                                    <th>Nombre</th>
                                    <td id="nameCompany"></td>

                                </tr>
                                <tr>
                                    <th>Pais</th>
                                    <td id="countryCompany"></td>
                                </tr>
                                <tr>
                                    <th>Telefono</th>
                                    <td id="phoneCompany"></td>
                                </tr>
                                <tr>
                                    <th>Web</th>
                                    <td id="webCompany"></td>
                                </tr>
                                <tr>
                                    <th>Aviones</th>
                                    <td id="plainCompany"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- /.container -->

    <script type="text/javascript " src="js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript " src="js/jquery-ui.min.js "></script>
    <script type="text/javascript " src="js/bootstrap.min.js "></script>
    <script type="text/javascript " src="js/underscore-min.js "></script>

</body>

</html>

<script type="text/javascript ">
    let url = "./includes/nav.html"
    $.ajax({
        crossOrigin: true,
        url: url,
        success: function(data) {
            $("#navContainer").html(data);
        }
    });
    //Companies list
    let aviones = [{
        idAvion: 1,
        patente: 12341,
        fabricante: "emi",
        capacidad: 100,
        modelo: "Avion1",
        fechaFabricacion: "25 de marzo de 1985",
        fechaEntradaServicio: "26 de marzo de 1985"
    }, {
        idAvion: 2,
        patente: 12341,
        fabricante: "emi",
        capacidad: 100,
        modelo: "Avion2",
        fechaFabricacion: "25 de marzo de 1985",
        fechaEntradaServicio: "26 de marzo de 1985"
    }];
    const availableCompanies = [{
        id: 1,
        name: "Emirates",
        pais: "Emiratos √Årabes Unidos",
        telefono: 1234123,
        web: "www.emirates.com",
        aviones: aviones,
    }, {
        id: 2,
        name: "United Airlines",
        pais: "Canada",
        telefono: 124142,
        web: "www.unitedairlines.com",
        aviones: aviones,
    }, {
        id: 3,
        name: "Singapore Airlines",
        pais: "Singapur",
        telefono: 5123123,
        web: "www.spairlines.com",
        aviones: aviones,
    }, {
        id: 4,
        name: "American Airlines",
        pais: "EEUU",
        telefono: 134123,
        web: "www.americanairlines.com",
        aviones: aviones,
    }, {
        id: 5,
        name: "Avianca Virgin Atlantic",
        pais: "EEUU",
        telefono: 65123412,
        web: "-",
        aviones: aviones,
    }, {
        id: 6,
        name: "LAN Airlines",
        pais: "Chile",
        telefono: 5234234,
        web: "www.lan.com",
        aviones: aviones,
    }, {
        id: 7,
        name: "Alaska Central Express",
        pais: "Alaska",
        telefono: 5123412,
        web: "-",
        aviones: aviones,
    }, {
        id: 8,
        name: "Alpine Air Express",
        pais: "EEUU",
        telefono: 63452342,
        web: "-",
        aviones: aviones,
    }, {
        id: 9,
        name: "Aerolineas Argentinas",
        pais: "Argentina",
        telefono: 1235123125,
        web: "www.aerolineas.com.ar",
        aviones: aviones,
    }];
    //Sort by company name
    let companyName = _.sortBy(availableCompanies, name);
    companyName = _.pluck(companyName, 'name');
    //Filling autocomplete
    $(".autocomplete").autocomplete({
        source: companyName
    });
    $(":button ").click(function(e) {
        $("#plainCompany").text("");
        let companieSelected = $("#companies").val();
        let element = _.findWhere(availableCompanies, {
            name: companieSelected
        });
        $("#idCompany").text(element.id);
        $("#nameCompany").text(element.name);
        $("#countryCompany").text(element.pais);
        $("#phoneCompany").text(element.telefono);
        $("#webCompany").text(element.web);
        let plainData = "";
        _.each(element.aviones, function(avion) {
            plainData += "Avion: " + avion.idAvion;
            plainData += " Modelo: " + avion.modelo;
            plainData += " || ";
        });
        $("#plainCompany").append(plainData.substring(0, plainData.length - 3));

    });
</script>